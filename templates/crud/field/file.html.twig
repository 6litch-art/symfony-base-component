{# @var ea \EasyCorp\Bundle\EasyAdminBundle\Context\AdminContext #}
{# @var field \EasyCorp\Bundle\EasyAdminBundle\Dto\FieldDto #}
{# @var entity \EasyCorp\Bundle\EasyAdminBundle\Dto\EntityDto #}

{% set renderFormat = field.customOptions.get('renderFormat') %}
{% if  renderFormat == 'image' or renderFormat == 'avatar' %}

    {% if field.formattedValue is not empty %}

        {% set html_id = 'ea-lightbox-' ~ field.uniqueId %}
        <a href="#" class="ea-lightbox-thumbnail" data-featherlight="#{{ html_id }}" data-featherlight-close-on-click="anywhere">
            <img src="{{ field.formattedValue }}" class="image-avatar img-fluid">
        </a>
        <div id="{{ html_id }}" class="ea-lightbox">
            <img src="{{ field.formattedValue }}">
        </div>

    {% else %}

        {% set html_id = 'ea-lightbox-' ~ field.uniqueId %}
        <div id="{{ html_id }}" class="image-avatar img-fluid">
            {% if renderFormat == 'avatar' %}
                <i class="fa fa-fw fa-user-circle fa-3x"></i>
            {% else %}
                <i class="fa fa-fw fa-image fa-3x"></i>
            {% endif %}
        </div>

    {% endif %}

{% elseif renderFormat == 'count' %}

    <span class="badge badge-secondary">
        {% if field is iterable %}
            {{ field.formattedValue|length }}
        {% else %}
            {{ (field.formattedValue is not empty)|default("0") }}
        {% endif %}
    </span>

{% else %}

    {{ field.formattedValue }}

{% endif %}