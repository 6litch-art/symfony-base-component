{# @var ea \EasyCorp\Bundle\EasyAdminBundle\Context\AdminContext #}
{# @var field \EasyCorp\Bundle\EasyAdminBundle\Dto\FieldDto #}
{# @var entity \EasyCorp\Bundle\EasyAdminBundle\Dto\EntityDto #}

{% set renderFormat = field.customOptions.get('renderFormat') %}
{% set preferredDownloadName = field.customOptions.get('preferredDownloadName') %}
{% if  renderFormat == 'image' or renderFormat == 'avatar' %}

    {% if field.formattedValue is not empty %}

        {% set html_id = 'ea-lightbox-' ~ field.uniqueId %}
        <a href="#" class="ea-lightbox-thumbnail" data-featherlight="#{{ html_id }}" data-ea-lightbox-content-selector="#{{ html_id }}" data-featherlight-close-on-click="anywhere">
            <div id="{{ html_id }}" class="img-fluid thumbnail-{{renderFormat}}">
                <img src="{{ field.formattedValue }}">
            </div>
        </a>
        
        <div id="{{ html_id }}" class="ea-lightbox">
            <img src="{{ field.formattedValue }}">
        </div>

    {% else %}

        {% set html_id = 'ea-lightbox-' ~ field.uniqueId %}
            <div id="{{ html_id }}" class="img-fluid thumbnail-{{renderFormat}}">
            {% if renderFormat == 'avatar' %}
                <i class="fas fa-fw fa-user-circle fa-3x"></i>
            {% else %}
                <i class="fas fa-fw fa-image fa-3x"></i>
            {% endif %}
            </div>
        </div>

    {% endif %}

{% elseif renderFormat == 'count' %}

    <span class="badge badge-secondary">
        {% if field is iterable %}
            {{ field.formattedValue|length }}
        {% else %}
            {{ (field.formattedValue is not empty)|default("0") }}
        {% endif %}
    </span>

{% else %}

    {% if field.formattedValue is not empty %}
        <a href="{{ field.formattedValue }}" download="{{ preferredDownloadName }}"><i class="fa-fw fas fa-paperclip fa-2x"></i></a>
    {% else %}
        <i class="fas fa-fw fa-exclamation-triangle"></i>
        {% if field is not iterable and field.value is empty %} File not found !{% endif %}
    {% endif %}
{% endif %}